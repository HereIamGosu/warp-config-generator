<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генерация конфигурации WARP</title>
    <link rel="icon" href="/static/cloud.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/styles.css">
    <script defer src="/static/script.js"></script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
<div class="container">
    <img src="/static/logo.svg" alt="Логотип">
    <div id="status"></div>

    <!-- Кнопка генерации конфигурации -->
    <button id="generateButton"><span class="button__text">Сгенерировать</span></button>

    <!-- Кнопка для скачивания файла планировщика -->
    <button id="schedulerButton">
        <span class="button__text">Скачать файл планировщика</span>
    </button>
</div>

<script>
    document.getElementById('schedulerButton').onclick = async function() {
        const url = 'https://raw.githubusercontent.com/HereIamGosu/warp-config-generator/main/SchedulerAmnezia.bat';
        try {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error(`HTTP error! статус: ${response.status}`);
            }

            const blob = await response.blob();
            const urlBlob = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = urlBlob;
            a.download = 'SchedulerAmnezia.bat';
            document.body.appendChild(a);
            a.click();
            a.remove();
            window.URL.revokeObjectURL(urlBlob);
        } catch (error) {
            console.error('Ошибка при скачивании файла:', error);
            alert('Не удалось скачать файл. Попробуйте позже.');
        }
    };
</script>
</body>
</html>
